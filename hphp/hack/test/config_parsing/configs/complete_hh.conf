# Test hh.conf with all fields set to non-default values

# Saved state options
saved_state_manifold_api_key = test_manifold_api_key_12345
log_saved_state_age_and_distance = true
use_manifold_cython_client = true
zstd_decompress_by_file = false
use_compressed_dep_graph = false
project_metadata_w_flags = false

# Basic server options
min_log_level = debug
attempt_fix_credentials = true
log_categories = typing,decl,naming
log_large_fanouts_threshold = 500
log_init_proc_stack_also_on_absent_from = true
log_inference_constraints = true
experiments = experiment_1,experiment_2,experiment_3
experiments_config_meta = test_meta_string
experiments_config_enabled = true
experiments_config_update = true
experiments_config_path = /tmp/experiments
experiments_config_ttl_seconds = 3600
experiments_config_source = test_source

# Saved state loading
use_mini_state = true
use_mini_state_when_indexing = true
require_saved_state = false
load_state_natively_v4 = true
load_state_natively_download_timeout = 120
load_state_natively_dirty_files_timeout = 300

# Type decl and workers
type_decl_bucket_size = 500
extend_defs_per_file_bucket_size = 1000
enable_on_nfs = true
enable_fuzzy_search = false
max_purgatory_clients = 50
search_chunk_size = 200
io_priority = 5
cpu_priority = 5
max_workers = 8

# Shared memory
sharedmem_dirs = /dev/shm/custom,/tmp/shm/custom
shm_use_sharded_hashtbl = true
shm_cache_size = 4294967296

# Informant
use_dummy_informant = false
informant_min_distance_restart = 50

# Parser and type checking
use_full_fidelity_parser = false
interrupt_on_watchman = true
interrupt_on_client = true
trace_parsing = true
prechecked_files = false
enable_global_access_check = true
enable_type_check_filter_files = true

# IDE options
ide_symbolindex_search_provider = CustomIndex
predeclare_ide = true
longlived_workers = true

# Mercurial awareness
hg_aware = true
hg_aware_parsing_restart_threshold = 100
hg_aware_redecl_restart_threshold = 50
hg_aware_recheck_restart_threshold = 200

# IDE parser cache
ide_parser_cache = true
store_decls_in_saved_state = true
idle_gc_slice = 1000

# Member heaps and decls
populate_member_heaps = false
fetch_remote_old_decls = false
skip_hierarchy_checks = true
skip_tast_checks = true

# Local workers
num_local_workers = 4
defer_class_declaration_threshold = 100

# Streaming errors
produce_streaming_errors = false
consume_streaming_errors = true

# Rust backend
rust_provider_backend = true
rust_elab = true

# Naming table
naming_sqlite_path = /path/to/naming.sqlite
enable_naming_table_fallback = true
symbolindex_quiet = true

# TICO
tico_invalidate_files = true
tico_invalidate_smart = true

# Profiling
profile_log = true
profile_type_check_duration_threshold = 2.5
profile_type_check_memory_threshold_mb = 500
profile_type_check_twice = true
profile_decling = all_telemetry
profile_owner = test_owner
profile_desc = test_description
profile_slow_threshold = 1.5
memtrace_dir = /tmp/hh_memtrace

# IDE features
go_to_implementation = false
allow_unstable_features = true

# Watchman config
use_watchman = true
watchman_enabled = true
watchman_debug_logging = true
watchman_init_timeout = 20
watchman_sockname = /custom/watchman.sock
watchman_subscribe_v2 = true
watchman_synchronous_timeout = 180

# EdenFS file watcher
edenfs_file_watcher_enabled = true
edenfs_file_watcher_debug_logging = true
edenfs_file_watcher_timeout_secs = 90
edenfs_file_watcher_sync_queries_obey_deferral = false
edenfs_file_watcher_throttle_time_ms = 100
edenfs_file_watcher_report_telemetry = true
edenfs_file_watcher_state_tracking = true
edenfs_file_watcher_tracked_states = hg.update,hg.transaction,custom.state

# Workload quantile
workload_quantile = 2, 4

# Rollout
rollout_group = test_group

# Manifold
specify_manifold_api_key = true

# Remote old decls
remote_old_decls_no_limit = true
cache_remote_decls = true
disable_naming_table_fallback_loading = true

# Distributed type checking (hh_distc)
use_distc = false
enable_fanout_aware_distc = true
hh_distc_fanout_threshold = 500
hh_distc_fanout_full_init_threshold = 10000
hh_distc_exponential_backoff_num_retries = 3

# IDE naming table
ide_load_naming_table_on_disk = false
ide_naming_table_update_threshold = 500

# Dump TAST
dump_tast_hashes = true
dump_tasts = dump_tasts_list.txt

# LSP options
lsp_sticky_quarantine = true
lsp_invalidation = true
autocomplete_sort_text = true

# Warnings
hack_warnings = false
warnings_default_all = true
warnings_in_sandcastle = false

# Package config
package_config_strict_validation = true

# Fanout
fanout_strip_class_location = true

# State loader timeouts
state_loader_timeout_current_base_rev_timeout = 300
state_loader_timeout_current_hg_rev = 240
state_loader_timeout_find_nearest_state = 240
state_loader_timeout_package_fetch = 600

# Remote type checking
remote_type_check_enabled = true
remote_type_check_num_workers = 8
remote_type_check_recheck_threshold = 500000
remote_type_check_max_batch_size = 40000
remote_type_check_remote_initial_payload_ratio = 0.5

# Recheck capture
recheck_capture_enabled = true
recheck_capture_error_threshold = 5
recheck_capture_fanout_threshold = 20000
recheck_capture_rechecked_files_threshold = 20000
recheck_capture_sample_threshold = 0.05
