before: 1
bar: 0
foo: 0
after: 1