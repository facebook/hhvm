# Copyright (c) Meta Platforms, Inc. and affiliates.
# All rights reserved.
#
# This source code is licensed under the BSD-style license found in the
# LICENSE file in the root directory of this source tree.

# Auto-generated by proxygen/facebook/generate_cmake.py - DO NOT EDIT MANUALLY

proxygen_add_library(proxygen_services_http_acceptor
  EXPORTED_DEPS
    proxygen_services_acceptor_configuration
    proxygen_utils_shared_wheel_timer
    proxygen_utils_timeoutset
    wangle::wangle_acceptor
    Folly::folly_io_async_server_socket
)

proxygen_add_library(proxygen_services_acceptor_configuration
  EXPORTED_DEPS
    proxygen_http_codec_codec_common
    wangle::wangle_acceptor_server_socket_config
    Folly::folly_io_async_async_socket
    Folly::folly_string
    ZLIB::ZLIB
)

proxygen_add_library(proxygen_services_service_configuration)

proxygen_add_library(proxygen_services
  SRCS
    RequestWorkerThread.cpp
    RequestWorkerThreadNoExecutor.cpp
    Service.cpp
  DEPS
    Folly::folly_io_async_event_base_manager
  EXPORTED_DEPS
    proxygen_services_worker
    proxygen_utils_acceptor_address
    wangle::wangle_acceptor
    wangle::wangle_acceptor_connection_counter
    wangle::wangle_acceptor_load_shed_configuration
    Folly::folly_io_async_async_base
    Folly::folly_io_async_server_socket
)

proxygen_add_library(proxygen_services_worker
  SRCS
    WorkerThread.cpp
  DEPS
    Folly::folly_experimental_io_io_uring_backend
    Folly::folly_io_async_event_base_manager
    Folly::folly_string
    glog::glog
  EXPORTED_DEPS
    Folly::folly_io_async_async_base
    Folly::folly_portability
)

if(BUILD_TESTS)
  add_subdirectory(test)
endif()
