(alias
    (name pocket_universes_parsing_good)
    (deps %{exe:../../../src/hh_parse.exe}
          %{project_root}/test/verify.py
          %{project_root}/test/review.sh
          (glob_files %{project_root}/test/pocket_universes/parsing/HH_FLAGS)
          (glob_files %{project_root}/test/pocket_universes/parsing/*.good.php)
          (glob_files %{project_root}/test/pocket_universes/parsing/*.good.php.exp))
    (action (run %{project_root}/test/verify.py %{project_root}/test/pocket_universes/parsing
    --program %{exe:../../../src/hh_parse.exe}
    --in-extension .good.php --flags
    --full-fidelity-errors --full-fidelity-errors-all
    --full-fidelity-json
    --pretty-print-json)))

(alias
    (name pocket_universes_parsing_bad)
    (deps %{exe:../../../src/hh_parse.exe}
          %{project_root}/test/verify.py
          %{project_root}/test/review.sh
          (glob_files %{project_root}/test/pocket_universes/parsing/HH_FLAGS)
          (glob_files %{project_root}/test/pocket_universes/parsing/*.bad.php)
          (glob_files %{project_root}/test/pocket_universes/parsing/*.bad.php.exp))
    (action (run %{project_root}/test/verify.py %{project_root}/test/pocket_universes/parsing
    --program %{exe:../../../src/hh_parse.exe}
    --in-extension .bad.php --flags
    --full-fidelity-errors --full-fidelity-errors-all
    )))

(alias
    (name runtest)
    (deps
        (alias pocket_universes_parsing_good)
        (alias pocket_universes_parsing_bad)))
