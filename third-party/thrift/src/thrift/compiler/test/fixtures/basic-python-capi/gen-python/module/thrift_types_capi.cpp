
/**
 * Autogenerated by Thrift
 *
 * DO NOT EDIT
 *  @generated
 *
 */

#include <folly/python/import.h>
#include <thrift/lib/python/capi/iobuf.h>
#include <thrift/lib/python/types.h>

#include <thrift/compiler/test/fixtures/basic-python-capi/src/gen-python/module/thrift_types_api.h>
#include <thrift/compiler/test/fixtures/basic-python-capi/src/gen-python/module/thrift_types_capi.h>

namespace apache {
namespace thrift {
namespace python {
namespace capi {
namespace {
bool ensure_module_imported() {
  static ::folly::python::import_cache_nocapture import((
      ::import_test__fixtures__basic_python_capi__module__thrift_types_capi));
  return import();
}
} // namespace

ExtractorResult<::test::fixtures::basic-python-capi::MyStruct>
Extractor<::test::fixtures::basic-python-capi::MyStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyStruct>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyStruct>(
        "Thrift serialize error: MyStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::basic-python-capi::MyStruct>(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyStruct>::operator()(
    ::test::fixtures::basic-python-capi::MyStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyStruct(
      detail::serialize_to_iobuf(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyDataItem>
Extractor<::test::fixtures::basic-python-capi::MyDataItem>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyDataItem>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyDataItem(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyDataItem>(
        "Thrift serialize error: MyDataItem");
  }
  return detail::deserialize_iobuf<::test::fixtures::basic-python-capi::MyDataItem>(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyDataItem>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyDataItem(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataItem");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyDataItem>::operator()(
    ::test::fixtures::basic-python-capi::MyDataItem&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyDataItem(
      detail::serialize_to_iobuf(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::TransitiveDoubler>
Extractor<::test::fixtures::basic-python-capi::TransitiveDoubler>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a TransitiveDoubler");
      }
      return extractorError<::test::fixtures::basic-python-capi::TransitiveDoubler>(
          "Marshal error: TransitiveDoubler");
  }
  return ::test::fixtures::basic-python-capi::TransitiveDoubler{};
}


int Extractor<::test::fixtures::basic-python-capi::TransitiveDoubler>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__TransitiveDoubler(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: TransitiveDoubler");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::TransitiveDoubler>::operator()(
    ::test::fixtures::basic-python-capi::TransitiveDoubler&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::TransitiveDoubler>> ctor;
  StrongRef fbthrift_data(ctor(std::forward<::test::fixtures::basic-python-capi::TransitiveDoubler>(val)));
  return init__test__fixtures__basic_python_capi__module__TransitiveDoubler(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::TransitiveDoubler>>::operator()(
    FOLLY_MAYBE_UNUSED ::test::fixtures::basic-python-capi::TransitiveDoubler&& val) {
  StrongRef fbthrift_data(createStructTuple(0));
  return std::move(fbthrift_data).release();
}

ExtractorResult<::test::fixtures::basic-python-capi::DoubledPair>
Extractor<::test::fixtures::basic-python-capi::DoubledPair>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::DoubledPair>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__DoubledPair(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::DoubledPair>(
        "Thrift serialize error: DoubledPair");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::DoubledPair, ::thrift::test::lib::StructDoubler
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::DoubledPair>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__DoubledPair(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: DoubledPair");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::DoubledPair>::operator()(
    ::test::fixtures::basic-python-capi::DoubledPair&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__DoubledPair(
      detail::serialize_adapted_to_iobuf<::thrift::test::lib::StructDoubler>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::StringPair>
Extractor<::test::fixtures::basic-python-capi::StringPair>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::StringPair>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__StringPair(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::StringPair>(
        "Thrift serialize error: StringPair");
  }
  return detail::deserialize_iobuf<::test::fixtures::basic-python-capi::StringPair>(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::StringPair>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__StringPair(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: StringPair");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::StringPair>::operator()(
    ::test::fixtures::basic-python-capi::StringPair&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__StringPair(
      detail::serialize_to_iobuf(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::VapidStruct>
Extractor<::test::fixtures::basic-python-capi::VapidStruct>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a EmptyStruct");
      }
      return extractorError<::test::fixtures::basic-python-capi::VapidStruct>(
          "Marshal error: EmptyStruct");
  }
  return ::test::fixtures::basic-python-capi::VapidStruct{};
}


int Extractor<::test::fixtures::basic-python-capi::VapidStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__EmptyStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: EmptyStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::VapidStruct>::operator()(
    ::test::fixtures::basic-python-capi::VapidStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::VapidStruct>> ctor;
  StrongRef fbthrift_data(ctor(std::forward<::test::fixtures::basic-python-capi::VapidStruct>(val)));
  return init__test__fixtures__basic_python_capi__module__EmptyStruct(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::VapidStruct>>::operator()(
    FOLLY_MAYBE_UNUSED ::test::fixtures::basic-python-capi::VapidStruct&& val) {
  StrongRef fbthrift_data(createStructTuple(0));
  return std::move(fbthrift_data).release();
}

ExtractorResult<::test::fixtures::basic-python-capi::PrimitiveStruct>
Extractor<::test::fixtures::basic-python-capi::PrimitiveStruct>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a PrimitiveStruct");
      }
      return extractorError<::test::fixtures::basic-python-capi::PrimitiveStruct>(
          "Marshal error: PrimitiveStruct");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::basic-python-capi::PrimitiveStruct>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::basic-python-capi::PrimitiveStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::basic-python-capi::PrimitiveStruct>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::basic-python-capi::PrimitiveStruct cpp;
  std::optional<std::string_view> error;
  Extractor<bool>{}.extractInto(
      cpp.booly(),
      PyTuple_GET_ITEM(fbThriftData, 0 + 1),
      error);
  Extractor<int8_t>{}.extractInto(
      cpp.charry(),
      PyTuple_GET_ITEM(fbThriftData, 1 + 1),
      error);
  Extractor<int16_t>{}.extractInto(
      cpp.shortay(),
      PyTuple_GET_ITEM(fbThriftData, 2 + 1),
      error);
  Extractor<int32_t>{}.extractInto(
      cpp.inty(),
      PyTuple_GET_ITEM(fbThriftData, 3 + 1),
      error);
  Extractor<int64_t>{}.extractInto(
      cpp.longy(),
      PyTuple_GET_ITEM(fbThriftData, 4 + 1),
      error);
  Extractor<float>{}.extractInto(
      cpp.floaty(),
      PyTuple_GET_ITEM(fbThriftData, 5 + 1),
      error);
  Extractor<double>{}.extractInto(
      cpp.dubby(),
      PyTuple_GET_ITEM(fbThriftData, 6 + 1),
      error);
  Extractor<Bytes>{}.extractInto(
      cpp.stringy(),
      PyTuple_GET_ITEM(fbThriftData, 7 + 1),
      error);
  Extractor<Bytes>{}.extractInto(
      cpp.bytey(),
      PyTuple_GET_ITEM(fbThriftData, 8 + 1),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}

int Extractor<::test::fixtures::basic-python-capi::PrimitiveStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__PrimitiveStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: PrimitiveStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::PrimitiveStruct>::operator()(
    ::test::fixtures::basic-python-capi::PrimitiveStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::PrimitiveStruct>> ctor;
  StrongRef fbthrift_data(ctor(std::forward<::test::fixtures::basic-python-capi::PrimitiveStruct>(val)));
  return init__test__fixtures__basic_python_capi__module__PrimitiveStruct(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::PrimitiveStruct>>::operator()(
    FOLLY_MAYBE_UNUSED ::test::fixtures::basic-python-capi::PrimitiveStruct&& val) {
  StrongRef fbthrift_data(createStructTuple(9));
  StrongRef __booly(Constructor<bool>{}.constructFrom(val.booly()));
  if (!__booly || setStructField(*fbthrift_data, 0, *__booly) == -1) {
    return nullptr;
  }
  StrongRef __charry(Constructor<int8_t>{}.constructFrom(val.charry()));
  if (!__charry || setStructField(*fbthrift_data, 1, *__charry) == -1) {
    return nullptr;
  }
  StrongRef __shorty(Constructor<int16_t>{}.constructFrom(val.shortay()));
  if (!__shorty || setStructField(*fbthrift_data, 2, *__shorty) == -1) {
    return nullptr;
  }
  StrongRef __inty(Constructor<int32_t>{}.constructFrom(val.inty()));
  if (!__inty || setStructField(*fbthrift_data, 3, *__inty) == -1) {
    return nullptr;
  }
  StrongRef __longy(Constructor<int64_t>{}.constructFrom(val.longy()));
  if (!__longy || setStructField(*fbthrift_data, 4, *__longy) == -1) {
    return nullptr;
  }
  StrongRef __floaty(Constructor<float>{}.constructFrom(val.floaty()));
  if (!__floaty || setStructField(*fbthrift_data, 5, *__floaty) == -1) {
    return nullptr;
  }
  StrongRef __dubby(Constructor<double>{}.constructFrom(val.dubby()));
  if (!__dubby || setStructField(*fbthrift_data, 6, *__dubby) == -1) {
    return nullptr;
  }
  StrongRef __stringy(Constructor<Bytes>{}.constructFrom(val.stringy()));
  if (!__stringy || setStructField(*fbthrift_data, 7, *__stringy) == -1) {
    return nullptr;
  }
  StrongRef __bytey(Constructor<Bytes>{}.constructFrom(val.bytey()));
  if (!__bytey || setStructField(*fbthrift_data, 8, *__bytey) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}

ExtractorResult<::test::fixtures::basic-python-capi::ListStruct>
Extractor<::test::fixtures::basic-python-capi::ListStruct>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a ListStruct");
      }
      return extractorError<::test::fixtures::basic-python-capi::ListStruct>(
          "Marshal error: ListStruct");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::basic-python-capi::ListStruct>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::basic-python-capi::ListStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::basic-python-capi::ListStruct>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::basic-python-capi::ListStruct cpp;
  std::optional<std::string_view> error;
  Extractor<list<bool>>{}.extractInto(
      cpp.boolz(),
      PyTuple_GET_ITEM(fbThriftData, 0 + 1),
      error);
  Extractor<list<int64_t>>{}.extractInto(
      cpp.intz(),
      PyTuple_GET_ITEM(fbThriftData, 1 + 1),
      error);
  Extractor<list<Bytes>>{}.extractInto(
      cpp.stringz(),
      PyTuple_GET_ITEM(fbThriftData, 2 + 1),
      error);
  Extractor<list<Bytes, std::deque<native_t<Bytes>>>>{}.extractInto(
      cpp.encoded(),
      PyTuple_GET_ITEM(fbThriftData, 3 + 1),
      error);
  Extractor<list<int64_t, std::deque<uint64_t>>>{}.extractInto(
      cpp.uidz(),
      PyTuple_GET_ITEM(fbThriftData, 4 + 1),
      error);
  Extractor<list<list<double>>>{}.extractInto(
      cpp.matrix(),
      PyTuple_GET_ITEM(fbThriftData, 5 + 1),
      error);
  Extractor<list<list<int8_t, folly::small_vector<folly::small_vector<uint8_t>>::value_type>, folly::small_vector<folly::small_vector<uint8_t>>>>{}.extractInto(
      cpp.ucharz(),
      PyTuple_GET_ITEM(fbThriftData, 6 + 1),
      error);
  Extractor<list<list<list<int8_t, folly::fbvector<folly::fbvector<folly::fbvector<uint8_t>>>::value_type::value_type>, folly::fbvector<folly::fbvector<folly::fbvector<uint8_t>>>::value_type>, folly::fbvector<folly::fbvector<folly::fbvector<uint8_t>>>>>{}.extractInto(
      cpp.voxels(),
      PyTuple_GET_ITEM(fbThriftData, 7 + 1),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}

int Extractor<::test::fixtures::basic-python-capi::ListStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__ListStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: ListStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::ListStruct>::operator()(
    ::test::fixtures::basic-python-capi::ListStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::ListStruct>> ctor;
  StrongRef fbthrift_data(ctor(std::forward<::test::fixtures::basic-python-capi::ListStruct>(val)));
  return init__test__fixtures__basic_python_capi__module__ListStruct(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::ListStruct>>::operator()(
    FOLLY_MAYBE_UNUSED ::test::fixtures::basic-python-capi::ListStruct&& val) {
  StrongRef fbthrift_data(createStructTuple(8));
  StrongRef __boolz(Constructor<list<bool>>{}.constructFrom(val.boolz()));
  if (!__boolz || setStructField(*fbthrift_data, 0, *__boolz) == -1) {
    return nullptr;
  }
  StrongRef __intz(Constructor<list<int64_t>>{}.constructFrom(val.intz()));
  if (!__intz || setStructField(*fbthrift_data, 1, *__intz) == -1) {
    return nullptr;
  }
  StrongRef __stringz(Constructor<list<Bytes>>{}.constructFrom(val.stringz()));
  if (!__stringz || setStructField(*fbthrift_data, 2, *__stringz) == -1) {
    return nullptr;
  }
  StrongRef __encoded(Constructor<list<Bytes, std::deque<native_t<Bytes>>>>{}.constructFrom(val.encoded()));
  if (!__encoded || setStructField(*fbthrift_data, 3, *__encoded) == -1) {
    return nullptr;
  }
  StrongRef __uidz(Constructor<list<int64_t, std::deque<uint64_t>>>{}.constructFrom(val.uidz()));
  if (!__uidz || setStructField(*fbthrift_data, 4, *__uidz) == -1) {
    return nullptr;
  }
  StrongRef __matrix(Constructor<list<list<double>>>{}.constructFrom(val.matrix()));
  if (!__matrix || setStructField(*fbthrift_data, 5, *__matrix) == -1) {
    return nullptr;
  }
  StrongRef __ucharz(Constructor<list<list<int8_t, folly::small_vector<folly::small_vector<uint8_t>>::value_type>, folly::small_vector<folly::small_vector<uint8_t>>>>{}.constructFrom(val.ucharz()));
  if (!__ucharz || setStructField(*fbthrift_data, 6, *__ucharz) == -1) {
    return nullptr;
  }
  StrongRef __voxels(Constructor<list<list<list<int8_t, folly::fbvector<folly::fbvector<folly::fbvector<uint8_t>>>::value_type::value_type>, folly::fbvector<folly::fbvector<folly::fbvector<uint8_t>>>::value_type>, folly::fbvector<folly::fbvector<folly::fbvector<uint8_t>>>>>{}.constructFrom(val.voxels()));
  if (!__voxels || setStructField(*fbthrift_data, 7, *__voxels) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}

ExtractorResult<::test::fixtures::basic-python-capi::SetStruct>
Extractor<::test::fixtures::basic-python-capi::SetStruct>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a SetStruct");
      }
      return extractorError<::test::fixtures::basic-python-capi::SetStruct>(
          "Marshal error: SetStruct");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::basic-python-capi::SetStruct>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::basic-python-capi::SetStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::basic-python-capi::SetStruct>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::basic-python-capi::SetStruct cpp;
  std::optional<std::string_view> error;
  Extractor<set<apache::thrift::python::capi::ComposedEnum<::test::fixtures::basic-python-capi::MyEnum>>>{}.extractInto(
      cpp.enumz(),
      PyTuple_GET_ITEM(fbThriftData, 0 + 1),
      error);
  Extractor<set<int32_t>>{}.extractInto(
      cpp.intz(),
      PyTuple_GET_ITEM(fbThriftData, 1 + 1),
      error);
  Extractor<set<Bytes>>{}.extractInto(
      cpp.binnaz(),
      PyTuple_GET_ITEM(fbThriftData, 2 + 1),
      error);
  Extractor<set<Bytes, std::unordered_set<native_t<Bytes>>>>{}.extractInto(
      cpp.encoded(),
      PyTuple_GET_ITEM(fbThriftData, 3 + 1),
      error);
  Extractor<set<int64_t, std::unordered_set<uint64_t>>>{}.extractInto(
      cpp.uidz(),
      PyTuple_GET_ITEM(fbThriftData, 4 + 1),
      error);
  Extractor<set<int8_t, folly::F14FastSet<uint8_t>>>{}.extractInto(
      cpp.charz(),
      PyTuple_GET_ITEM(fbThriftData, 5 + 1),
      error);
  Extractor<list<set<int64_t>>>{}.extractInto(
      cpp.setz(),
      PyTuple_GET_ITEM(fbThriftData, 6 + 1),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}

int Extractor<::test::fixtures::basic-python-capi::SetStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__SetStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: SetStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::SetStruct>::operator()(
    ::test::fixtures::basic-python-capi::SetStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::SetStruct>> ctor;
  StrongRef fbthrift_data(ctor(std::forward<::test::fixtures::basic-python-capi::SetStruct>(val)));
  return init__test__fixtures__basic_python_capi__module__SetStruct(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::SetStruct>>::operator()(
    FOLLY_MAYBE_UNUSED ::test::fixtures::basic-python-capi::SetStruct&& val) {
  StrongRef fbthrift_data(createStructTuple(7));
  StrongRef __enumz(Constructor<set<apache::thrift::python::capi::ComposedEnum<::test::fixtures::basic-python-capi::MyEnum>>>{}.constructFrom(val.enumz()));
  if (!__enumz || setStructField(*fbthrift_data, 0, *__enumz) == -1) {
    return nullptr;
  }
  StrongRef __intz(Constructor<set<int32_t>>{}.constructFrom(val.intz()));
  if (!__intz || setStructField(*fbthrift_data, 1, *__intz) == -1) {
    return nullptr;
  }
  StrongRef __binnaz(Constructor<set<Bytes>>{}.constructFrom(val.binnaz()));
  if (!__binnaz || setStructField(*fbthrift_data, 2, *__binnaz) == -1) {
    return nullptr;
  }
  StrongRef __encoded(Constructor<set<Bytes, std::unordered_set<native_t<Bytes>>>>{}.constructFrom(val.encoded()));
  if (!__encoded || setStructField(*fbthrift_data, 3, *__encoded) == -1) {
    return nullptr;
  }
  StrongRef __uidz(Constructor<set<int64_t, std::unordered_set<uint64_t>>>{}.constructFrom(val.uidz()));
  if (!__uidz || setStructField(*fbthrift_data, 4, *__uidz) == -1) {
    return nullptr;
  }
  StrongRef __charz(Constructor<set<int8_t, folly::F14FastSet<uint8_t>>>{}.constructFrom(val.charz()));
  if (!__charz || setStructField(*fbthrift_data, 5, *__charz) == -1) {
    return nullptr;
  }
  StrongRef __setz(Constructor<list<set<int64_t>>>{}.constructFrom(val.setz()));
  if (!__setz || setStructField(*fbthrift_data, 6, *__setz) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}

ExtractorResult<::test::fixtures::basic-python-capi::MapStruct>
Extractor<::test::fixtures::basic-python-capi::MapStruct>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a MapStruct");
      }
      return extractorError<::test::fixtures::basic-python-capi::MapStruct>(
          "Marshal error: MapStruct");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::basic-python-capi::MapStruct>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::basic-python-capi::MapStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::basic-python-capi::MapStruct>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::basic-python-capi::MapStruct cpp;
  std::optional<std::string_view> error;
  Extractor<map<apache::thrift::python::capi::ComposedEnum<::test::fixtures::basic-python-capi::MyEnum>, Bytes>>{}.extractInto(
      cpp.enumz(),
      PyTuple_GET_ITEM(fbThriftData, 0 + 1),
      error);
  Extractor<map<int32_t, Bytes>>{}.extractInto(
      cpp.intz(),
      PyTuple_GET_ITEM(fbThriftData, 1 + 1),
      error);
  Extractor<map<Bytes, apache::thrift::python::capi::ComposedStruct<::test::fixtures::basic-python-capi::PrimitiveStruct>>>{}.extractInto(
      cpp.binnaz(),
      PyTuple_GET_ITEM(fbThriftData, 2 + 1),
      error);
  Extractor<map<Bytes, double, std::unordered_map<native_t<Bytes>, native_t<double>>>>{}.extractInto(
      cpp.encoded(),
      PyTuple_GET_ITEM(fbThriftData, 3 + 1),
      error);
  Extractor<map<int64_t, float, std::unordered_map<uint64_t, float>>>{}.extractInto(
      cpp.flotz(),
      PyTuple_GET_ITEM(fbThriftData, 4 + 1),
      error);
  Extractor<list<map<int32_t, int64_t>>>{}.extractInto(
      cpp.map_list(),
      PyTuple_GET_ITEM(fbThriftData, 5 + 1),
      error);
  Extractor<map<int32_t, list<int64_t>>>{}.extractInto(
      cpp.list_map(),
      PyTuple_GET_ITEM(fbThriftData, 6 + 1),
      error);
  Extractor<map<int32_t, list<double, folly::F14FastMap<int, folly::fbvector<double>>::mapped_type>, folly::F14FastMap<int, folly::fbvector<double>>>>{}.extractInto(
      cpp.fast_list_map(),
      PyTuple_GET_ITEM(fbThriftData, 7 + 1),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}

int Extractor<::test::fixtures::basic-python-capi::MapStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MapStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MapStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MapStruct>::operator()(
    ::test::fixtures::basic-python-capi::MapStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::MapStruct>> ctor;
  StrongRef fbthrift_data(ctor(std::forward<::test::fixtures::basic-python-capi::MapStruct>(val)));
  return init__test__fixtures__basic_python_capi__module__MapStruct(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::MapStruct>>::operator()(
    FOLLY_MAYBE_UNUSED ::test::fixtures::basic-python-capi::MapStruct&& val) {
  StrongRef fbthrift_data(createStructTuple(8));
  StrongRef __enumz(Constructor<map<apache::thrift::python::capi::ComposedEnum<::test::fixtures::basic-python-capi::MyEnum>, Bytes>>{}.constructFrom(val.enumz()));
  if (!__enumz || setStructField(*fbthrift_data, 0, *__enumz) == -1) {
    return nullptr;
  }
  StrongRef __intz(Constructor<map<int32_t, Bytes>>{}.constructFrom(val.intz()));
  if (!__intz || setStructField(*fbthrift_data, 1, *__intz) == -1) {
    return nullptr;
  }
  StrongRef __binnaz(Constructor<map<Bytes, apache::thrift::python::capi::ComposedStruct<::test::fixtures::basic-python-capi::PrimitiveStruct>>>{}.constructFrom(val.binnaz()));
  if (!__binnaz || setStructField(*fbthrift_data, 2, *__binnaz) == -1) {
    return nullptr;
  }
  StrongRef __encoded(Constructor<map<Bytes, double, std::unordered_map<native_t<Bytes>, native_t<double>>>>{}.constructFrom(val.encoded()));
  if (!__encoded || setStructField(*fbthrift_data, 3, *__encoded) == -1) {
    return nullptr;
  }
  StrongRef __flotz(Constructor<map<int64_t, float, std::unordered_map<uint64_t, float>>>{}.constructFrom(val.flotz()));
  if (!__flotz || setStructField(*fbthrift_data, 4, *__flotz) == -1) {
    return nullptr;
  }
  StrongRef __map_list(Constructor<list<map<int32_t, int64_t>>>{}.constructFrom(val.map_list()));
  if (!__map_list || setStructField(*fbthrift_data, 5, *__map_list) == -1) {
    return nullptr;
  }
  StrongRef __list_map(Constructor<map<int32_t, list<int64_t>>>{}.constructFrom(val.list_map()));
  if (!__list_map || setStructField(*fbthrift_data, 6, *__list_map) == -1) {
    return nullptr;
  }
  StrongRef __fast_list_map(Constructor<map<int32_t, list<double, folly::F14FastMap<int, folly::fbvector<double>>::mapped_type>, folly::F14FastMap<int, folly::fbvector<double>>>>{}.constructFrom(val.fast_list_map()));
  if (!__fast_list_map || setStructField(*fbthrift_data, 7, *__fast_list_map) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}

ExtractorResult<::test::fixtures::basic-python-capi::ComposeStruct>
Extractor<::test::fixtures::basic-python-capi::ComposeStruct>::operator()(PyObject* obj) {
  int tCheckResult = typeCheck(obj);
  if (tCheckResult != 1) {
      if (tCheckResult == 0) {
        PyErr_SetString(PyExc_TypeError, "Not a ComposeStruct");
      }
      return extractorError<::test::fixtures::basic-python-capi::ComposeStruct>(
          "Marshal error: ComposeStruct");
  }
  StrongRef fbThriftData(getThriftData(obj));
  return Extractor<::apache::thrift::python::capi::ComposedStruct<
      ::test::fixtures::basic-python-capi::ComposeStruct>>{}(*fbThriftData);
}

ExtractorResult<::test::fixtures::basic-python-capi::ComposeStruct>
Extractor<::apache::thrift::python::capi::ComposedStruct<
    ::test::fixtures::basic-python-capi::ComposeStruct>>::operator()(PyObject* fbThriftData) {
  ::test::fixtures::basic-python-capi::ComposeStruct cpp;
  std::optional<std::string_view> error;
  Extractor<apache::thrift::python::capi::ComposedEnum<::test::fixtures::basic-python-capi::MyEnum>>{}.extractInto(
      cpp.enum_(),
      PyTuple_GET_ITEM(fbThriftData, 0 + 1),
      error);
  Extractor<apache::thrift::python::capi::ComposedEnum<::test::fixtures::basic-python-capi::NormalDecentEnum>>{}.extractInto(
      cpp.renamed_(),
      PyTuple_GET_ITEM(fbThriftData, 1 + 1),
      error);
  Extractor<apache::thrift::python::capi::ComposedStruct<::test::fixtures::basic-python-capi::PrimitiveStruct>>{}.extractInto(
      cpp.primitive(),
      PyTuple_GET_ITEM(fbThriftData, 2 + 1),
      error);
  Extractor<apache::thrift::python::capi::ComposedStruct<::test::fixtures::basic-python-capi::ListStruct>>{}.extractInto(
      cpp.aliased(),
      PyTuple_GET_ITEM(fbThriftData, 3 + 1),
      error);
  if (error) {
    return folly::makeUnexpected(*error);
  }
  return cpp;
}

int Extractor<::test::fixtures::basic-python-capi::ComposeStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__ComposeStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: ComposeStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::ComposeStruct>::operator()(
    ::test::fixtures::basic-python-capi::ComposeStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::ComposeStruct>> ctor;
  StrongRef fbthrift_data(ctor(std::forward<::test::fixtures::basic-python-capi::ComposeStruct>(val)));
  return init__test__fixtures__basic_python_capi__module__ComposeStruct(*fbthrift_data);
}

PyObject* Constructor<::apache::thrift::python::capi::ComposedStruct<
        ::test::fixtures::basic-python-capi::ComposeStruct>>::operator()(
    FOLLY_MAYBE_UNUSED ::test::fixtures::basic-python-capi::ComposeStruct&& val) {
  StrongRef fbthrift_data(createStructTuple(4));
  StrongRef __enum_(Constructor<apache::thrift::python::capi::ComposedEnum<::test::fixtures::basic-python-capi::MyEnum>>{}.constructFrom(val.enum_()));
  if (!__enum_ || setStructField(*fbthrift_data, 0, *__enum_) == -1) {
    return nullptr;
  }
  StrongRef __renamed_(Constructor<apache::thrift::python::capi::ComposedEnum<::test::fixtures::basic-python-capi::NormalDecentEnum>>{}.constructFrom(val.renamed_()));
  if (!__renamed_ || setStructField(*fbthrift_data, 1, *__renamed_) == -1) {
    return nullptr;
  }
  StrongRef __primitive(Constructor<apache::thrift::python::capi::ComposedStruct<::test::fixtures::basic-python-capi::PrimitiveStruct>>{}.constructFrom(val.primitive()));
  if (!__primitive || setStructField(*fbthrift_data, 2, *__primitive) == -1) {
    return nullptr;
  }
  StrongRef __aliased(Constructor<apache::thrift::python::capi::ComposedStruct<::test::fixtures::basic-python-capi::ListStruct>>{}.constructFrom(val.aliased()));
  if (!__aliased || setStructField(*fbthrift_data, 3, *__aliased) == -1) {
    return nullptr;
  }
  return std::move(fbthrift_data).release();
}

ExtractorResult<::test::fixtures::basic-python-capi::OurUnion>
Extractor<::test::fixtures::basic-python-capi::OurUnion>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::OurUnion>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyUnion(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::OurUnion>(
        "Thrift serialize error: MyUnion");
  }
  return detail::deserialize_iobuf<::test::fixtures::basic-python-capi::OurUnion>(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::OurUnion>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyUnion(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyUnion");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::OurUnion>::operator()(
    ::test::fixtures::basic-python-capi::OurUnion&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyUnion(
      detail::serialize_to_iobuf(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyStructPatch>
Extractor<::test::fixtures::basic-python-capi::MyStructPatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyStructPatch>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyStructPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyStructPatch>(
        "Thrift serialize error: MyStructPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::MyStructPatch, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::basic-python-capi::MyStructPatchStruct>
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyStructPatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyStructPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyStructPatch>::operator()(
    ::test::fixtures::basic-python-capi::MyStructPatch&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyStructPatch(
      detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::basic-python-capi::MyStructPatchStruct>>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyStructField4Patch>
Extractor<::test::fixtures::basic-python-capi::MyStructField4Patch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyStructField4Patch>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyStructField4Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyStructField4Patch>(
        "Thrift serialize error: MyStructField4Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::MyStructField4Patch, ::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::basic-python-capi::MyStructField4PatchStruct>
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyStructField4Patch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyStructField4Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField4Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyStructField4Patch>::operator()(
    ::test::fixtures::basic-python-capi::MyStructField4Patch&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyStructField4Patch(
      detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::AssignPatchAdapter<::test::fixtures::basic-python-capi::MyStructField4PatchStruct>>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyStructField6Patch>
Extractor<::test::fixtures::basic-python-capi::MyStructField6Patch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyStructField6Patch>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyStructField6Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyStructField6Patch>(
        "Thrift serialize error: MyStructField6Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::MyStructField6Patch, ::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::basic-python-capi::MyStructField6PatchStruct>
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyStructField6Patch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyStructField6Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField6Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyStructField6Patch>::operator()(
    ::test::fixtures::basic-python-capi::MyStructField6Patch&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyStructField6Patch(
      detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::ListPatchAdapter<::test::fixtures::basic-python-capi::MyStructField6PatchStruct>>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyStructField7Patch>
Extractor<::test::fixtures::basic-python-capi::MyStructField7Patch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyStructField7Patch>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyStructField7Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyStructField7Patch>(
        "Thrift serialize error: MyStructField7Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::MyStructField7Patch, ::apache::thrift::op::detail::MapPatchAdapter<::test::fixtures::basic-python-capi::MyStructField7PatchStruct>
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyStructField7Patch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyStructField7Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField7Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyStructField7Patch>::operator()(
    ::test::fixtures::basic-python-capi::MyStructField7Patch&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyStructField7Patch(
      detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::MapPatchAdapter<::test::fixtures::basic-python-capi::MyStructField7PatchStruct>>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyStructField8Patch>
Extractor<::test::fixtures::basic-python-capi::MyStructField8Patch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyStructField8Patch>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyStructField8Patch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyStructField8Patch>(
        "Thrift serialize error: MyStructField8Patch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::MyStructField8Patch, ::apache::thrift::op::detail::SetPatchAdapter<::test::fixtures::basic-python-capi::MyStructField8PatchStruct>
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyStructField8Patch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyStructField8Patch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructField8Patch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyStructField8Patch>::operator()(
    ::test::fixtures::basic-python-capi::MyStructField8Patch&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyStructField8Patch(
      detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::SetPatchAdapter<::test::fixtures::basic-python-capi::MyStructField8PatchStruct>>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyStructFieldPatch>
Extractor<::test::fixtures::basic-python-capi::MyStructFieldPatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyStructFieldPatch>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyStructFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyStructFieldPatch>(
        "Thrift serialize error: MyStructFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::MyStructFieldPatch, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::basic-python-capi::MyStructFieldPatchStruct>
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyStructFieldPatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyStructFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyStructFieldPatch>::operator()(
    ::test::fixtures::basic-python-capi::MyStructFieldPatch&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyStructFieldPatch(
      detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::basic-python-capi::MyStructFieldPatchStruct>>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyStructEnsureStruct>
Extractor<::test::fixtures::basic-python-capi::MyStructEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyStructEnsureStruct>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyStructEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyStructEnsureStruct>(
        "Thrift serialize error: MyStructEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::basic-python-capi::MyStructEnsureStruct>(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyStructEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyStructEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyStructEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyStructEnsureStruct>::operator()(
    ::test::fixtures::basic-python-capi::MyStructEnsureStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyStructEnsureStruct(
      detail::serialize_to_iobuf(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyDataItemPatch>
Extractor<::test::fixtures::basic-python-capi::MyDataItemPatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyDataItemPatch>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyDataItemPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyDataItemPatch>(
        "Thrift serialize error: MyDataItemPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::MyDataItemPatch, ::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::basic-python-capi::MyDataItemPatchStruct>
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyDataItemPatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyDataItemPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataItemPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyDataItemPatch>::operator()(
    ::test::fixtures::basic-python-capi::MyDataItemPatch&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyDataItemPatch(
      detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::StructPatchAdapter<::test::fixtures::basic-python-capi::MyDataItemPatchStruct>>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyDataItemFieldPatch>
Extractor<::test::fixtures::basic-python-capi::MyDataItemFieldPatch>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyDataItemFieldPatch>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyDataItemFieldPatch(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyDataItemFieldPatch>(
        "Thrift serialize error: MyDataItemFieldPatch");
  }
  return detail::deserialize_iobuf_to_adapted<
      ::test::fixtures::basic-python-capi::MyDataItemFieldPatch, ::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::basic-python-capi::MyDataItemFieldPatchStruct>
    >(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyDataItemFieldPatch>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyDataItemFieldPatch(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataItemFieldPatch");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyDataItemFieldPatch>::operator()(
    ::test::fixtures::basic-python-capi::MyDataItemFieldPatch&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyDataItemFieldPatch(
      detail::serialize_adapted_to_iobuf<::apache::thrift::op::detail::FieldPatchAdapter<::test::fixtures::basic-python-capi::MyDataItemFieldPatchStruct>>(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyDataItemEnsureStruct>
Extractor<::test::fixtures::basic-python-capi::MyDataItemEnsureStruct>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyDataItemEnsureStruct>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  std::unique_ptr<folly::IOBuf> val(
      extract__test__fixtures__basic_python_capi__module__MyDataItemEnsureStruct(obj));
  if (!val) {
    CHECK(PyErr_Occurred());
    return extractorError<::test::fixtures::basic-python-capi::MyDataItemEnsureStruct>(
        "Thrift serialize error: MyDataItemEnsureStruct");
  }
  return detail::deserialize_iobuf<::test::fixtures::basic-python-capi::MyDataItemEnsureStruct>(std::move(val));
}


int Extractor<::test::fixtures::basic-python-capi::MyDataItemEnsureStruct>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyDataItemEnsureStruct(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyDataItemEnsureStruct");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyDataItemEnsureStruct>::operator()(
    ::test::fixtures::basic-python-capi::MyDataItemEnsureStruct&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyDataItemEnsureStruct(
      detail::serialize_to_iobuf(std::move(val)));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}


ExtractorResult<::test::fixtures::basic-python-capi::MyEnum>
Extractor<::test::fixtures::basic-python-capi::MyEnum>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::MyEnum>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int64_t val = extract__test__fixtures__basic_python_capi__module__MyEnum(obj);
  if (val == -1 && PyErr_Occurred()) {
    return extractorError<::test::fixtures::basic-python-capi::MyEnum>(
        "Error getting python int value: MyEnum");
  }
  return static_cast<::test::fixtures::basic-python-capi::MyEnum>(val);
}

int Extractor<::test::fixtures::basic-python-capi::MyEnum>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__MyEnum(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: MyEnum");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::MyEnum>::operator()(
    ::test::fixtures::basic-python-capi::MyEnum&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__MyEnum(
      static_cast<int64_t>(val));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}

ExtractorResult<::test::fixtures::basic-python-capi::NormalDecentEnum>
Extractor<::test::fixtures::basic-python-capi::NormalDecentEnum>::operator()(PyObject* obj) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return extractorError<::test::fixtures::basic-python-capi::NormalDecentEnum>(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int64_t val = extract__test__fixtures__basic_python_capi__module__AnnoyingEnum(obj);
  if (val == -1 && PyErr_Occurred()) {
    return extractorError<::test::fixtures::basic-python-capi::NormalDecentEnum>(
        "Error getting python int value: AnnoyingEnum");
  }
  return static_cast<::test::fixtures::basic-python-capi::NormalDecentEnum>(val);
}

int Extractor<::test::fixtures::basic-python-capi::NormalDecentEnum>::typeCheck(PyObject* obj) {
  if (!ensure_module_imported()) {
    ::folly::python::handlePythonError(
      "Module test.fixtures.basic-python-capi.module import error");
  }
  int result =
      can_extract__test__fixtures__basic_python_capi__module__AnnoyingEnum(obj);
  if (result < 0) {
    ::folly::python::handlePythonError(
      "Unexpected type check error: AnnoyingEnum");
  }
  return result;
}


PyObject* Constructor<::test::fixtures::basic-python-capi::NormalDecentEnum>::operator()(
    ::test::fixtures::basic-python-capi::NormalDecentEnum&& val) {
  if (!ensure_module_imported()) {
    DCHECK(PyErr_Occurred() != nullptr);
    return nullptr;
  }
  auto ptr = construct__test__fixtures__basic_python_capi__module__AnnoyingEnum(
      static_cast<int64_t>(val));
  if (!ptr) {
    CHECK(PyErr_Occurred());
  }
  return ptr;
}

} // namespace capi
} // namespace python
} // namespace thrift
} // namespace apache
