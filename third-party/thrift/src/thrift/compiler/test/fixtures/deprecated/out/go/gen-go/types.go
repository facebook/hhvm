// Autogenerated by Thrift for thrift/compiler/test/fixtures/deprecated/src/module.thrift
//
// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
//  @generated

package deprecated

import (
    "fmt"
    "reflect"

    thrift "github.com/facebook/fbthrift/thrift/lib/go/thrift/types"
    metadata "github.com/facebook/fbthrift/thrift/lib/thrift/metadata"
)

// (needed to ensure safety because of naive import list construction)
var _ = fmt.Printf
var _ = reflect.Ptr
var _ = thrift.VOID
var _ = metadata.GoUnusedProtection__

type User struct {
    Id int64 `thrift:"id,1" json:"id" db:"id"`
    // Deprecated: Use 'full_name' instead
    Name string `thrift:"name,2" json:"name" db:"name"`
    FullName string `thrift:"full_name,3" json:"full_name" db:"full_name"`
    // Deprecated: This field is no longer used
    Email *string `thrift:"email,4,optional" json:"email,omitempty" db:"email"`
    EmailAddress *string `thrift:"email_address,5,optional" json:"email_address,omitempty" db:"email_address"`
}
// Compile time interface enforcer
var _ thrift.Struct = (*User)(nil)

func NewUser() *User {
    return (&User{}).setDefaults()
}

func (x *User) GetId() int64 {
    return x.Id
}

func (x *User) GetName() string {
    return x.Name
}

func (x *User) GetFullName() string {
    return x.FullName
}

func (x *User) GetEmail() string {
    if !x.IsSetEmail() {
        return ""
    }
    return *x.Email
}

func (x *User) GetEmailAddress() string {
    if !x.IsSetEmailAddress() {
        return ""
    }
    return *x.EmailAddress
}

func (x *User) SetIdNonCompat(value int64) *User {
    x.Id = value
    return x
}

func (x *User) SetId(value int64) *User {
    x.Id = value
    return x
}

func (x *User) SetNameNonCompat(value string) *User {
    x.Name = value
    return x
}

func (x *User) SetName(value string) *User {
    x.Name = value
    return x
}

func (x *User) SetFullNameNonCompat(value string) *User {
    x.FullName = value
    return x
}

func (x *User) SetFullName(value string) *User {
    x.FullName = value
    return x
}

func (x *User) SetEmailNonCompat(value string) *User {
    x.Email = &value
    return x
}

func (x *User) SetEmail(value *string) *User {
    x.Email = value
    return x
}

func (x *User) SetEmailAddressNonCompat(value string) *User {
    x.EmailAddress = &value
    return x
}

func (x *User) SetEmailAddress(value *string) *User {
    x.EmailAddress = value
    return x
}

func (x *User) IsSetEmail() bool {
    return x != nil && x.Email != nil
}

func (x *User) IsSetEmailAddress() bool {
    return x != nil && x.EmailAddress != nil
}

func (x *User) writeField1(p thrift.Encoder) error {  // Id
    if err := p.WriteFieldBegin("id", thrift.I64, 1); err != nil {
        return thrift.PrependError("User write field begin error: ", err)
    }

    item := x.Id
    if err := p.WriteI64(item); err != nil {
        return err
    }

    if err := p.WriteFieldEnd(); err != nil {
        return thrift.PrependError("User write field end error: ", err)
    }
    return nil
}

func (x *User) writeField2(p thrift.Encoder) error {  // Name
    if err := p.WriteFieldBegin("name", thrift.STRING, 2); err != nil {
        return thrift.PrependError("User write field begin error: ", err)
    }

    item := x.Name
    if err := p.WriteString(item); err != nil {
        return err
    }

    if err := p.WriteFieldEnd(); err != nil {
        return thrift.PrependError("User write field end error: ", err)
    }
    return nil
}

func (x *User) writeField3(p thrift.Encoder) error {  // FullName
    if err := p.WriteFieldBegin("full_name", thrift.STRING, 3); err != nil {
        return thrift.PrependError("User write field begin error: ", err)
    }

    item := x.FullName
    if err := p.WriteString(item); err != nil {
        return err
    }

    if err := p.WriteFieldEnd(); err != nil {
        return thrift.PrependError("User write field end error: ", err)
    }
    return nil
}

func (x *User) writeField4(p thrift.Encoder) error {  // Email
    if !x.IsSetEmail() {
        return nil
    }

    if err := p.WriteFieldBegin("email", thrift.STRING, 4); err != nil {
        return thrift.PrependError("User write field begin error: ", err)
    }

    item := *x.Email
    if err := p.WriteString(item); err != nil {
        return err
    }

    if err := p.WriteFieldEnd(); err != nil {
        return thrift.PrependError("User write field end error: ", err)
    }
    return nil
}

func (x *User) writeField5(p thrift.Encoder) error {  // EmailAddress
    if !x.IsSetEmailAddress() {
        return nil
    }

    if err := p.WriteFieldBegin("email_address", thrift.STRING, 5); err != nil {
        return thrift.PrependError("User write field begin error: ", err)
    }

    item := *x.EmailAddress
    if err := p.WriteString(item); err != nil {
        return err
    }

    if err := p.WriteFieldEnd(); err != nil {
        return thrift.PrependError("User write field end error: ", err)
    }
    return nil
}

func (x *User) readField1(p thrift.Decoder) error {  // Id
    result, err := p.ReadI64()
    if err != nil {
        return err
    }

    x.Id = result
    return nil
}

func (x *User) readField2(p thrift.Decoder) error {  // Name
    result, err := p.ReadString()
    if err != nil {
        return err
    }

    x.Name = result
    return nil
}

func (x *User) readField3(p thrift.Decoder) error {  // FullName
    result, err := p.ReadString()
    if err != nil {
        return err
    }

    x.FullName = result
    return nil
}

func (x *User) readField4(p thrift.Decoder) error {  // Email
    result, err := p.ReadString()
    if err != nil {
        return err
    }

    x.Email = &result
    return nil
}

func (x *User) readField5(p thrift.Decoder) error {  // EmailAddress
    result, err := p.ReadString()
    if err != nil {
        return err
    }

    x.EmailAddress = &result
    return nil
}





func (x *User) Write(p thrift.Encoder) error {
    if err := p.WriteStructBegin("User"); err != nil {
        return thrift.PrependError("User write struct begin error: ", err)
    }

    if err := x.writeField1(p); err != nil {
        return err
    }
    if err := x.writeField2(p); err != nil {
        return err
    }
    if err := x.writeField3(p); err != nil {
        return err
    }
    if err := x.writeField4(p); err != nil {
        return err
    }
    if err := x.writeField5(p); err != nil {
        return err
    }

    if err := p.WriteFieldStop(); err != nil {
        return thrift.PrependError("User write field stop error: ", err)
    }

    if err := p.WriteStructEnd(); err != nil {
        return thrift.PrependError("User write struct end error: ", err)
    }
    return nil
}

func (x *User) Read(p thrift.Decoder) error {
    if _, err := p.ReadStructBegin(); err != nil {
        return thrift.PrependError("User read error: ", err)
    }

    for {
        fieldName, wireType, id, err := p.ReadFieldBegin()
        if err != nil {
            return thrift.PrependError(fmt.Sprintf("User field %d ('%s') read error: ", id, fieldName), err)
        }

        if wireType == thrift.STOP {
            break;
        }

        var fieldReadErr error
        switch {
        case ((id == 1 && wireType == thrift.I64) || (id == thrift.NO_FIELD_ID && fieldName == "id")):  // id
            fieldReadErr = x.readField1(p)
        case ((id == 2 && wireType == thrift.STRING) || (id == thrift.NO_FIELD_ID && fieldName == "name")):  // name
            fieldReadErr = x.readField2(p)
        case ((id == 3 && wireType == thrift.STRING) || (id == thrift.NO_FIELD_ID && fieldName == "full_name")):  // full_name
            fieldReadErr = x.readField3(p)
        case ((id == 4 && wireType == thrift.STRING) || (id == thrift.NO_FIELD_ID && fieldName == "email")):  // email
            fieldReadErr = x.readField4(p)
        case ((id == 5 && wireType == thrift.STRING) || (id == thrift.NO_FIELD_ID && fieldName == "email_address")):  // email_address
            fieldReadErr = x.readField5(p)
        default:
            fieldReadErr = p.Skip(wireType)
        }

        if fieldReadErr != nil {
            return fieldReadErr
        }

        if err := p.ReadFieldEnd(); err != nil {
            return err
        }
    }

    if err := p.ReadStructEnd(); err != nil {
        return thrift.PrependError("User read struct end error: ", err)
    }

    return nil
}

func (x *User) String() string {
    return thrift.StructToString(reflect.ValueOf(x))
}

func (x *User) setDefaults() *User {
    return x.
        SetIdNonCompat(0).
        SetNameNonCompat("").
        SetFullNameNonCompat("")
}

func (x *User) GetThriftStructMetadata() *metadata.ThriftStruct {
    return premadeStructMetadata_User
}

type ExampleUnion struct {
    StringValue *string `thrift:"stringValue,1" json:"stringValue,omitempty" db:"stringValue"`
    // Deprecated: Use stringValue instead
    IntValue *int32 `thrift:"intValue,2" json:"intValue,omitempty" db:"intValue"`
    DoubleValue *float64 `thrift:"doubleValue,3" json:"doubleValue,omitempty" db:"doubleValue"`
}
// Compile time interface enforcer
var _ thrift.Struct = (*ExampleUnion)(nil)

func NewExampleUnion() *ExampleUnion {
    return (&ExampleUnion{}).setDefaults()
}

func (x *ExampleUnion) GetStringValue() string {
    if !x.IsSetStringValue() {
        return ""
    }
    return *x.StringValue
}

func (x *ExampleUnion) GetIntValue() int32 {
    if !x.IsSetIntValue() {
        return 0
    }
    return *x.IntValue
}

func (x *ExampleUnion) GetDoubleValue() float64 {
    if !x.IsSetDoubleValue() {
        return 0.0
    }
    return *x.DoubleValue
}

func (x *ExampleUnion) SetStringValueNonCompat(value string) *ExampleUnion {
    x.StringValue = &value
    return x
}

func (x *ExampleUnion) SetStringValue(value *string) *ExampleUnion {
    x.StringValue = value
    return x
}

func (x *ExampleUnion) SetIntValueNonCompat(value int32) *ExampleUnion {
    x.IntValue = &value
    return x
}

func (x *ExampleUnion) SetIntValue(value *int32) *ExampleUnion {
    x.IntValue = value
    return x
}

func (x *ExampleUnion) SetDoubleValueNonCompat(value float64) *ExampleUnion {
    x.DoubleValue = &value
    return x
}

func (x *ExampleUnion) SetDoubleValue(value *float64) *ExampleUnion {
    x.DoubleValue = value
    return x
}

func (x *ExampleUnion) IsSetStringValue() bool {
    return x != nil && x.StringValue != nil
}

func (x *ExampleUnion) IsSetIntValue() bool {
    return x != nil && x.IntValue != nil
}

func (x *ExampleUnion) IsSetDoubleValue() bool {
    return x != nil && x.DoubleValue != nil
}

func (x *ExampleUnion) writeField1(p thrift.Encoder) error {  // StringValue
    if !x.IsSetStringValue() {
        return nil
    }

    if err := p.WriteFieldBegin("stringValue", thrift.STRING, 1); err != nil {
        return thrift.PrependError("ExampleUnion write field begin error: ", err)
    }

    item := *x.StringValue
    if err := p.WriteString(item); err != nil {
        return err
    }

    if err := p.WriteFieldEnd(); err != nil {
        return thrift.PrependError("ExampleUnion write field end error: ", err)
    }
    return nil
}

func (x *ExampleUnion) writeField2(p thrift.Encoder) error {  // IntValue
    if !x.IsSetIntValue() {
        return nil
    }

    if err := p.WriteFieldBegin("intValue", thrift.I32, 2); err != nil {
        return thrift.PrependError("ExampleUnion write field begin error: ", err)
    }

    item := *x.IntValue
    if err := p.WriteI32(item); err != nil {
        return err
    }

    if err := p.WriteFieldEnd(); err != nil {
        return thrift.PrependError("ExampleUnion write field end error: ", err)
    }
    return nil
}

func (x *ExampleUnion) writeField3(p thrift.Encoder) error {  // DoubleValue
    if !x.IsSetDoubleValue() {
        return nil
    }

    if err := p.WriteFieldBegin("doubleValue", thrift.DOUBLE, 3); err != nil {
        return thrift.PrependError("ExampleUnion write field begin error: ", err)
    }

    item := *x.DoubleValue
    if err := p.WriteDouble(item); err != nil {
        return err
    }

    if err := p.WriteFieldEnd(); err != nil {
        return thrift.PrependError("ExampleUnion write field end error: ", err)
    }
    return nil
}

func (x *ExampleUnion) readField1(p thrift.Decoder) error {  // StringValue
    result, err := p.ReadString()
    if err != nil {
        return err
    }

    x.StringValue = &result
    return nil
}

func (x *ExampleUnion) readField2(p thrift.Decoder) error {  // IntValue
    result, err := p.ReadI32()
    if err != nil {
        return err
    }

    x.IntValue = &result
    return nil
}

func (x *ExampleUnion) readField3(p thrift.Decoder) error {  // DoubleValue
    result, err := p.ReadDouble()
    if err != nil {
        return err
    }

    x.DoubleValue = &result
    return nil
}




func (x *ExampleUnion) countSetFields() int {
    count := int(0)
    if (x.IsSetStringValue()) {
        count++
    }
    if (x.IsSetIntValue()) {
        count++
    }
    if (x.IsSetDoubleValue()) {
        count++
    }
    return count
}

func (x *ExampleUnion) CountSetFieldsExampleUnion() int {
    return x.countSetFields()
}



func (x *ExampleUnion) Write(p thrift.Encoder) error {
    if countSet := x.countSetFields(); countSet > 1 {
        return fmt.Errorf("ExampleUnion write union: no more than one field must be set (%d set).", countSet)
    }
    if err := p.WriteStructBegin("ExampleUnion"); err != nil {
        return thrift.PrependError("ExampleUnion write struct begin error: ", err)
    }

    if err := x.writeField1(p); err != nil {
        return err
    }
    if err := x.writeField2(p); err != nil {
        return err
    }
    if err := x.writeField3(p); err != nil {
        return err
    }

    if err := p.WriteFieldStop(); err != nil {
        return thrift.PrependError("ExampleUnion write field stop error: ", err)
    }

    if err := p.WriteStructEnd(); err != nil {
        return thrift.PrependError("ExampleUnion write struct end error: ", err)
    }
    return nil
}

func (x *ExampleUnion) Read(p thrift.Decoder) error {
    if _, err := p.ReadStructBegin(); err != nil {
        return thrift.PrependError("ExampleUnion read error: ", err)
    }

    for {
        fieldName, wireType, id, err := p.ReadFieldBegin()
        if err != nil {
            return thrift.PrependError(fmt.Sprintf("ExampleUnion field %d ('%s') read error: ", id, fieldName), err)
        }

        if wireType == thrift.STOP {
            break;
        }

        var fieldReadErr error
        switch {
        case ((id == 1 && wireType == thrift.STRING) || (id == thrift.NO_FIELD_ID && fieldName == "stringValue")):  // stringValue
            fieldReadErr = x.readField1(p)
        case ((id == 2 && wireType == thrift.I32) || (id == thrift.NO_FIELD_ID && fieldName == "intValue")):  // intValue
            fieldReadErr = x.readField2(p)
        case ((id == 3 && wireType == thrift.DOUBLE) || (id == thrift.NO_FIELD_ID && fieldName == "doubleValue")):  // doubleValue
            fieldReadErr = x.readField3(p)
        default:
            fieldReadErr = p.Skip(wireType)
        }

        if fieldReadErr != nil {
            return fieldReadErr
        }

        if err := p.ReadFieldEnd(); err != nil {
            return err
        }
    }

    if err := p.ReadStructEnd(); err != nil {
        return thrift.PrependError("ExampleUnion read struct end error: ", err)
    }

    return nil
}

func (x *ExampleUnion) String() string {
    return thrift.StructToString(reflect.ValueOf(x))
}

func (x *ExampleUnion) setDefaults() *ExampleUnion {
    return x
}

func (x *ExampleUnion) GetThriftStructMetadata() *metadata.ThriftStruct {
    return premadeStructMetadata_ExampleUnion
}


// RegisterTypes registers types found in this file that have a thrift_uri with the passed in registry.
func RegisterTypes(registry interface {
  RegisterType(name string, initializer func() any)
}) {
    registry.RegisterType("facebook.com/thrift/test/User", func() any { return NewUser() })
    registry.RegisterType("facebook.com/thrift/test/ExampleUnion", func() any { return NewExampleUnion() })

}
