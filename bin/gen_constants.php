<?php

$constants = get_defined_constants();
$constants['PHP_VERSION'] = '5.2.5.hiphop';
$constants['CLOCK_REALTIME'] = 0;
$constants['CLOCK_MONOTONIC'] = 1;
$constants['CLOCK_PROCESS_CPUTIME_ID'] = 2;
$constants['CLOCK_THREAD_CPUTIME_ID'] = 3;
$constants['INI_SCANNER_NORMAL'] = 0;
$constants['INI_SCANNER_RAW'] = 1;

print "<?php\n";
print "// Do NOT edit. Auto-generated by gen_constants\n\n";
foreach ($constants as $name => $value) {
  if (is_resource($value)) continue;
  if ($name == 'INF' || $name == 'NAN') continue;

  print "define('$name', ";
  if (is_string($value)) {
    if (preg_match('|/usr/local/|', $value)) {
      $value = '';
    }
    $value = preg_replace('/\r/', "\r", $value);
    $value = preg_replace('/\n/', "\n", $value);

    print "'$value'";
  } else if (is_numeric($value)) {
    print $value;
  } else if (is_bool($value)) {
    print $value ? "true" : "false";
  } else if (is_null($value)) {
    print 'null';
  } else {
    exit('doh');
  }
  print ");\n";
}

print "// HPHP system constants\n";
print "define('HPHP_TRIM_CHARLIST', \" \\n\\r\\t\\v\\0\");\n";

print "define('GLOBAL_STATE_IGNORE', 0);\n";
print "define('GLOBAL_STATE_OVERWRITE', 1);\n";
print "define('GLOBAL_STATE_SKIP', 2);\n";

print "define('GLOBAL_SYMBOL_GLOBAL_VARIABLE',     0);\n";
print "define('GLOBAL_SYMBOL_STATIC_VARIABLE',     1);\n";
print "define('GLOBAL_SYMBOL_CLASS_STATIC',        2);\n";
print "define('GLOBAL_SYMBOL_DYNAMIC_CONSTANT',    3);\n";
print "define('GLOBAL_SYMBOL_FILE_INCLUDE',        4);\n";
print "define('GLOBAL_SYMBOL_REDECLARED_FUNCTION', 5);\n";
print "define('GLOBAL_SYMBOL_REDECLARED_CLASS',    6);\n";
