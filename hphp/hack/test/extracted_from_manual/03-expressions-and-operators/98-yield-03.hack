// @generated by hh_manual from manual/hack/03-expressions-and-operators/98-yield.md
// @codegen-command : buck run fbcode//hphp/hack/src/hh_manual:hh_manual extract fbcode/hphp/hack/manual/hack/
function getTextFileLines(string $filename): Generator<int, string, void> {
  $infile = fopen($filename, 'r');
  if ($infile === false) {
    // handle file-open failure
  }

  try {
    while (true) {
      $textLine = fgets($infile);
      if ($textLine === false) {
        break;
      }
      $textLine = rtrim($textLine, "\r\n"); // strip off line terminator
      yield $textLine;
    }
  } finally {
    fclose($infile);
  }
}
