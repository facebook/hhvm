=== test conversions ===
D:3:{i:0;i:1;i:1;i:2;i:2;i:3;}
v:1:{s:3:"bar";}
D:1:{s:3:"foo";s:3:"bar";}
v:3:{i:1;i:2;i:3;}
=== test copy on set legacy bit ===
a:3:{i:0;i:1;i:1;i:2;i:2;i:3;}
v:3:{i:1;i:2;i:3;}

a:1:{s:3:"foo";s:3:"bar";}
D:1:{s:3:"foo";s:3:"bar";}
=== test legacy bit preserved on copy ===
a:4:{i:0;i:1;i:1;i:2;i:2;i:3;i:3;i:42;}
a:3:{i:0;i:1;i:1;i:2;i:2;i:3;}

a:1:{s:3:"foo";s:3:"bar";}
a:2:{s:3:"foo";s:3:"bar";s:3:"baz";i:4;}
